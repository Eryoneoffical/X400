
[gcode_shell_command DETECT_BED_OBJECT]
command: /home/mks/mainsail/all/bed_object.sh 
timeout:8

[gcode_shell_command APP_ERYONE_UPDATE]
command: /home/mks/mainsail/all/git_pull.sh 
timeout:8

[probe]
#pin: !EECAN:PB3
pin: EECAN:gpio21
x_offset: 0
y_offset: 0
#z_offset: 1.730
speed: 1.5
samples: 2
samples_result: median
sample_retract_dist: 2
samples_tolerance: 0.05
samples_tolerance_retries: 5


[gcode_macro resetON]
gcode:  SET_PIN PIN=reset_probe VALUE=1

[gcode_macro resetOFF]
gcode:  SET_PIN PIN=reset_probe VALUE=0

[output_pin reset_probe]
pin:EECAN:gpio0
pwm:False
value:1

[gcode_macro RS_probe]
gcode:
    M400
    ;G4 P0
    ;{ action_respond_info("RS_probe") }
    resetON
    G4 P200
    resetOFF
    G4 P200
    resetON
    G4 P200

[gcode_macro TEST_2]
gcode: 
	G1 X{params.X|default('240')} Y0 F6000

[output_pin Board_FAN]
pin:PA2
pwm:True
value:0.0
cycle_time:0.001
hardware_pwm:false


[gcode_macro CLEAN_N]
gcode:
	### heating
    SET_PIN PIN=Board_FAN VALUE=0.80
	{% if params.S %}
        M117 Heating
	    { action_respond_info("Heating extruder to %s C"%params.S) }
	    M109 S{params.S}
	{% endif %}
	##
		
    ####homing  
    {% if 'xy' not in printer.toolhead.homed_axes %}
    ;   SET_KINEMATIC_POSITION Z=1
    ;   G1 Z3
       G28 X Y
    {% endif %}
    ;SET_KINEMATIC_POSITION Z={printer.toolhead.axis_maximum.z|default(100)|float-5}
    G90
    {% if params.Y and params.Y|float <= params.A|float %}
       G1 Y{params.A} F6000
    {% elif params.Y and params.Y|float >= (printer.toolhead.axis_maximum.z|default(100)|float - params.A|float) %}
       G1 Y{printer.toolhead.axis_maximum.z|default(100)|float - params.A|float} F6000
    {% else %}
	  G1 Y{params.Y|default('0')} F6000  
    {% endif %}
    G1 X{params.X|default('240')} F6000
    G28 N
    
    ##adjust Y position
    M117 Cleaning nozzle 
	SET_KINEMATIC_POSITION X=240
	{% if params.Y and params.Y|float < 0 %} # Y < 0
	    G1 Y0 F6000	    
	    SET_KINEMATIC_POSITION Y={0.905-params.Y|default('0')|int}
	    G1 Y0.905 F6000
	{% elif params.Y and params.Y|float > (printer.toolhead.axis_maximum.z|default(100)|float - 3) %} # Y >max
	    G1 Y{params.Y|default('0')} F6000
	    SET_KINEMATIC_POSITION Y=0.905
	{% else %} #
	    G1 Y{params.Y|default('0')} F6000
	    SET_KINEMATIC_POSITION Y=0.905
	{% endif %}
    ##
    RS_probe
    probe PROBE_SPEED=2
    SET_KINEMATIC_POSITION Z=0
	G1 Z2
	G92 E0.0
	## line move
	G90
	G1 Z.2
	M83
	G92 E0.0
	## infill move
	;G1 X208.978 Y18.134 E.6 F6000
	;G1 E.6 F1800
    G1 F900  
   G1 Y.905
    ;M104 S150
   G1 X280 E8
   G1 Y1.905
   G1 X239.265 E8
	G1 F1350
    ;M104 S150
   G1 X239.861 Y.905
   G1 X239.265 Y.309 E.02604
   G1 X238.729 Y.309 E.01654
   G1 X239.691 Y1.271 E.04203
   G1 X239.691 Y1.807 E.01654
   G1 X238.193 Y.309 E.06543
   G1 X237.657 Y.309 E.01654
   G1 X239.691 Y2.343 E.08883
   G1 X239.691 Y2.691 E.01076
   G1 X239.504 Y2.691 E.00578
   G1 X237.121 Y.309 E.10405
   G1 X236.585 Y.309 E.01654
   G1 X238.968 Y2.691 E.10405
   G1 X238.433 Y2.691 E.01654
   G1 X236.05 Y.309 E.10405
   G1 X235.514 Y.309 E.01654
   G1 X237.897 Y2.691 E.10405
   G1 X237.361 Y2.691 E.01654
   G1 X234.978 Y.309 E.10405
   G1 X234.442 Y.309 E.01654
   G1 X236.825 Y2.691 E.10405
   G1 X236.289 Y2.691 E.01654
   G1 X233.906 Y.309 E.10405
   G1 X233.37 Y.309 E.01654
   G1 X235.753 Y2.691 E.10405
   G1 X235.217 Y2.691 E.01654
   G1 X232.835 Y.309 E.10405
   G1 X232.299 Y.309 E.01654
   G1 X234.682 Y2.691 E.10405
   G1 X234.146 Y2.691 E.01654
   G1 X231.763 Y.309 E.10405
   G1 X231.227 Y.309 E.01654
   G1 X233.61 Y2.691 E.10405
   G1 X233.074 Y2.691 E.01654
   G1 X230.691 Y.309 E.10405
   G1 X230.155 Y.309 E.01654
   G1 X232.538 Y2.691 E.10405
   G1 X232.002 Y2.691 E.01654
   G1 X229.62 Y.309 E.10405
   G1 X229.084 Y.309 E.01654
   G1 X231.467 Y2.691 E.10405
   G1 X230.931 Y2.691 E.01654
   G1 X228.548 Y.309 E.10405
   G1 X228.012 Y.309 E.01654
   G1 X230.395 Y2.691 E.10405
   G1 X229.859 Y2.691 E.01654
   G1 X227.476 Y.309 E.10405
   G1 X226.94 Y.309 E.01654
   G1 X229.323 Y2.691 E.10405
   G1 X228.787 Y2.691 E.01654
   G1 X226.404 Y.309 E.10405
   G1 X225.869 Y.309 E.01654
   G1 X228.252 Y2.691 E.10405
   G1 X227.716 Y2.691 E.01654
   G1 X225.333 Y.309 E.10405
   G1 X224.797 Y.309 E.01654
   G1 X227.18 Y2.691 E.10405
   G1 X226.644 Y2.691 E.01654
   G1 X224.261 Y.309 E.10405
   G1 X223.725 Y.309 E.01654
   G1 X226.108 Y2.691 E.10405
   G1 X225.572 Y2.691 E.01654
   G1 X223.189 Y.309 E.10405
   G1 X222.654 Y.309 E.01654
   G1 X225.036 Y2.691 E.10405
   G1 X224.501 Y2.691 E.01654
   G1 X222.118 Y.309 E.10405
   G1 X221.582 Y.309 E.01654
   G1 X223.965 Y2.691 E.10405
   G1 X223.429 Y2.691 E.01654
   G1 X221.046 Y.309 E.10405
   G1 X220.51 Y.309 E.01654
   G1 X222.893 Y2.691 E.10405
   G1 X222.357 Y2.691 E.01654
   G1 X219.974 Y.309 E.10405
   G1 X219.438 Y.309 E.01654
   G1 X221.821 Y2.691 E.10405
   G1 X221.286 Y2.691 E.01654
   G1 X218.903 Y.309 E.10405
   G1 X218.367 Y.309 E.01654
   G1 X220.75 Y2.691 E.10405
   G1 X220.214 Y2.691 E.01654
   G1 X217.831 Y.309 E.10405
   G1 X217.295 Y.309 E.01654
   G1 X219.678 Y2.691 E.10405
   G1 X219.142 Y2.691 E.01654
   G1 X216.759 Y.309 E.10405
   G1 X216.223 Y.309 E.01654
   G1 X218.606 Y2.691 E.10405
   G1 X218.07 Y2.691 E.01654
   G1 X215.688 Y.309 E.10405
   G1 X215.152 Y.309 E.01654
   G1 X217.535 Y2.691 E.10405
   G1 X216.999 Y2.691 E.01654
   G1 X214.616 Y.309 E.10405
   G1 X214.08 Y.309 E.01654
   G1 X216.463 Y2.691 E.10405
   G1 X215.927 Y2.691 E.01654
   G1 X213.544 Y.309 E.10405
   G1 X213.008 Y.309 E.01654
   G1 X215.391 Y2.691 E.10405
   G1 X214.855 Y2.691 E.01654
   G1 X212.472 Y.309 E.10405
   G1 X211.937 Y.309 E.01654
   G1 X214.32 Y2.691 E.10405
   G1 X213.784 Y2.691 E.01654
   G1 X211.401 Y.309 E.10405
   G1 X210.865 Y.309 E.01654
   G1 X213.248 Y2.691 E.10405
   G1 X212.712 Y2.691 E.01654
   G1 X210.329 Y.309 E.10405
   ## cool nozzle
    M104 S150
	G1 E-3
	G1 Z.15
    M106 S230
   M117 cooling nozzle   
   G1 X209.793 Y.309 
   G1 X212.176 Y2.691 
   G1 X211.64 Y2.691 
   G1 X209.257 Y.309 
   G1 X208.722 Y.309 
   G1 X211.105 Y2.691 
   G1 X210.569 Y2.691 
   G1 X208.186 Y.309
   G1 X207.65 Y.309 
   G1 X210.033 Y2.691 
   G1 X209.497 Y2.691 
   G1 X207.114 Y.309 
   G1 X206.578 Y.309 
   G1 X208.961 Y2.691 
   G1 X208.425 Y2.691 
   G1 X206.042 Y.309 
   G1 X205.507 Y.309 
   G1 X207.889 Y2.691 
   G1 X207.354 Y2.691 
   G1 X204.971 Y.309 
   G1 X204.435 Y.309 
   G1 X206.818 Y2.691 
   G1 X206.282 Y2.691 
   G1 X203.899 Y.309 
   G1 X203.363 Y.309 
   G1 X205.746 Y2.691 
   G1 X205.21 Y2.691 
   G1 X202.827 Y.309 
   G1 X202.291 Y.309 
   G1 X204.674 Y2.691 
   G1 X204.139 Y2.691 
   G1 X201.756 Y.309 
   G1 X201.22 Y.309 
   G1 X203.603 Y2.691 
   G1 X203.067 Y2.691 
   G1 X200.684 Y.309 
   G1 X200.148 Y.309 
   G1 X202.531 Y2.691 
   G1 X201.995 Y2.691 
   G1 X199.612 Y.309 
   G1 X199.076 Y.309 
   G1 X201.459 Y2.691 
   G1 X200.923 Y2.691 
   G1 X198.541 Y.309 
   G1 X198.005 Y.309 
   G1 X200.388 Y2.691 
   G1 X199.852 Y2.691
   G1 X197.469 Y.309 
   G1 X196.933 Y.309 
   G1 X199.316 Y2.691 
   G1 X198.78 Y2.691 
   G1 X196.397 Y.309 
   G1 X195.861 Y.309 
   G1 X198.244 Y2.691 
   G1 X197.708 Y2.691 
   G1 X195.325 Y.309 
   G1 X194.79 Y.309 
   G1 X197.173 Y2.691 
   G1 X196.637 Y2.691 
   G1 X194.254 Y.309 
   G1 X193.718 Y.309 
   G1 X196.101 Y2.691 
   G1 X195.565 Y2.691 
   G1 X193.182 Y.309 
   G1 X192.646 Y.309 
   G1 X195.029 Y2.691 
   G1 X194.493 Y2.691 
   G1 X192.11 Y.309 
   G1 X191.575 Y.309 
   G1 X193.958 Y2.691 
   G1 X193.422 Y2.691 
   G1 X191.039 Y.309 
   G1 X190.503 Y.309 
   G1 X192.886 Y2.691 
   G1 X192.35 Y2.691 
   G1 X189.967 Y.309 
   G1 X189.431 Y.309 
   G1 X191.814 Y2.691 
   G1 X191.278 Y2.691 
   G1 X188.895 Y.309 
   G1 X188.36 Y.309
   G1 X190.742 Y2.691
   G1 X190.207 Y2.691 
   G1 X187.824 Y.309 
   G1 X187.288 Y.309 
   G1 X189.671 Y2.691 
   G1 X189.135 Y2.691 
   G1 X186.752 Y.309 
   G1 X186.216 Y.309 
   G1 X188.599 Y2.691 
   G1 X188.063 Y2.691 
   G1 X185.68 Y.309 
   G1 X185.144 Y.309 
   G1 X187.527 Y2.691 
   G1 X186.992 Y2.691 
   G1 X184.609 Y.309 
   G1 X184.073 Y.309 
   G1 X186.456 Y2.691 
   G1 X185.92 Y2.691 
   G1 X183.537 Y.309 
   G1 X183.001 Y.309 
   G1 X185.384 Y2.691 
   G1 X184.848 Y2.691 
   G1 X182.465 Y.309 
   G1 X181.929 Y.309 
   G1 X184.312 Y2.691 
   G1 X183.776 Y2.691 
   G1 X181.394 Y.309 
   G1 X180.858 Y.309 
   G1 X183.241 Y2.691 
   G1 X182.705 Y2.691 
   G1 X180.322 Y.309 
   G1 X179.786 Y.309 
   G1 X182.169 Y2.691 
   G1 X181.633 Y2.691 
   G1 X179.25 Y.309 
   G1 X178.714 Y.309
   G1 X181.097 Y2.691 
   G1 X180.561 Y2.691 
   G1 X178.178 Y.309 
   G1 X177.643 Y.309 
   G1 X180.026 Y2.691 
   G1 X179.49 Y2.691 
   G1 X177.107 Y.309 
   G1 X176.571 Y.309 
   G1 X178.954 Y2.691 
   G1 X178.418 Y2.691 
   G1 X176.035 Y.309 
   G1 X175.499 Y.309 
   G1 X177.882 Y2.691 
   G1 X177.346 Y2.691 
   G1 X174.963 Y.309 
   G1 X174.428 Y.309 
   G1 X176.81 Y2.691 
   G1 X176.275 Y2.691 
   G1 X173.892 Y.309 
   G1 X173.356 Y.309 
   G1 X175.739 Y2.691 
   G1 X175.203 Y2.691 
   G1 X172.82 Y.309 
   G1 X172.284 Y.309 
   G1 X174.667 Y2.691 
   G1 X174.131 Y2.691 
   G1 X171.748 Y.309 
   G1 X171.213 Y.309 
   G1 X173.595 Y2.691 
   G1 X173.06 Y2.691 
   G1 X170.677 Y.309 
   G1 X170.141 Y.309 
   G1 X172.524 Y2.691 
   G1 X171.988 Y2.691 
   G1 X169.605 Y.309 
   G1 Z0
   G1 X169.069 Y.309 
   G1 X171.452 Y2.691 
   G1 X170.916 Y2.691 
   G1 X168.533 Y.309 
   G1 X167.997 Y.309 
   G1 X170.38 Y2.691 
   G1 X169.845 Y2.691 
   G1 X167.462 Y.309 
   G1 X166.926 Y.309 
   G1 X169.309 Y2.691 
   G1 X168.773 Y2.691 
   G1 X166.39 Y.309 
   G1 X165.854 Y.309 
   G1 X168.237 Y2.691 
   G1 X167.701 Y2.691 
   G1 X165.318 Y.309 
   G1 X164.782 Y.309 
   G1 X167.165 Y2.691 
   G1 X166.629 Y2.691 
   G1 X164.247 Y.309 
   G1 X163.711 Y.309 
   G1 X166.094 Y2.691 
   G1 X165.558 Y2.691 
   G1 X163.175 Y.309 
   G1 X162.639 Y.309 
   G1 X165.022 Y2.691 
   G1 X164.486 Y2.691 
   G1 X162.103 Y.309 
   G1 X161.567 Y.309 
   G1 X163.95 Y2.691 
   G1 X163.414 Y2.691 
   G1 X161.031 Y.309 
   G1 X160.496 Y.309 
   G1 X162.879 Y2.691 
   G1 X162.343 Y2.691 
   G1 X160.309 Y.657 
   G1 X160.309 Y1.193 
   G1 X161.807 Y2.691 
   G1 X161.271 Y2.691 
   G1 X160.309 Y1.729 
   G1 X160.309 Y2.265 
   G1 X160.905 Y2.861 

   G1 X155
	## waiting cool
	M106 S0
	M109 S150
	## move more close to bed
    G28 N
    ;M104 S150
    ;M109 S150
	#G1 Z0.06

    ## must homing XY
    G1 X200 Y200 F6000
    RS_probe
    M117 .
    #G1 X300 Y300
	G92 E0.0



[gcode_macro QUAD_GANTRY_LEVEL]
rename_existing : _QUAD_GANTRY_LEVEL
description :
gcode : 
	CLEAN_N S=220 X=240 Y=-3 A=0
	#_QUAD_GANTRY_LEVEL  LIFT_SPEED=5
    M117 QUAD_GANTRY_LEVEL
    _QUAD_GANTRY_LEVEL  horizontal_move_z=10 retry_tolerance=1 LIFT_SPEED=5
    G4 P500
    G28 Z
    G4 P500
    _QUAD_GANTRY_LEVEL  horizontal_move_z=5 retry_tolerance=0.05 LIFT_SPEED=5
   G4 P500
   G28 X Y
   G1 X132.5 Y197.5
   G28 N
   M117 .
   ;HOME_Z X=132.5 Y=197.5

    


    
    
# This file contains common pin mappings for  
# boards. To use this config, the firmware should be compiled for the
# stm32f407. When running "make menuconfig", select the 48KiB
# bootloader, and enable "Serial for communication" and select the "on USART1 PA10/PA9"
#[gcode_button m2y_gcode_button]
#pin: !PB15
#   The pin on which the button is connected. This parameter must be
#   provided.
#analog_range:
#   Two comma separated resistances (in Ohms) specifying the minimum
#   and maximum resistance range for the button. If analog_range is
#   provided then the pin must be an analog capable pin. The default
#   is to use digital gpio for the button.
#analog_pullup_resistor:
#   The pullup resistance (in Ohms) when analog_range is specified.
#   The default is 4700 ohms.
#press_gcode:M119 
#   A list of G-Code commands to execute when the button is pressed.
#   G-Code templates are supported. This parameter must be provided.
#release_gcode:M112
#   A list of G-Code commands to execute when the button is released.
#   G-Code templates are supported. The default is to not run any
#   commands on a button release.





[gcode_shell_command SCAN_ALL_PRINTER]
command: /home/mks/mainsail/all/scan.sh 
timeout: 30.
 


[save_variables]
filename = /home/mks/printer_data/config/variable.cfg



[output_pin LED]
pin:PA0
pwm:True
value:0.1
cycle_time:0.001
hardware_pwm:false



[force_move] 
enable_force_move: true 

[gcode_arcs]
resolution: 0.5
#   An arc will be split into segments. Each segment's length will
#   equal the resolution in mm set above. Lower values will produce a
#   finer arc, but also more work for your machine. Arcs smaller than
#   the configured value will become straight lines. The default is
#   1mm.

[gcode_macro T0]
gcode:
    # do nothing

[gcode_macro T1]
gcode:
    # do nothing

[gcode_macro T2]
gcode:
    # do nothing

[gcode_macro T3]
gcode:
    # do nothing   


[firmware_retraction]
retract_length: 1
#   The length of filament (in mm) to retract when G10 is activated,
#   and to unretract when G11 is activated (but see
#   unretract_extra_length below). The default is 0 mm.
#retract_speed: 20
#   The speed of retraction, in mm/s. The default is 20 mm/s.
#unretract_extra_length: 0
#   The length (in mm) of *additional* filament to add when
#   unretracting.
#unretract_speed: 10
#   The speed of unretraction, in mm/s. The default is 10 mm/s.
[gcode_macro PRINT_START]
gcode:
    SET_FAN_SPEED FAN=filter_fan SPEED=0.9
    {% if printer.save_variables.variables.use_ai==True %}
        {% if 'xy' not in printer.toolhead.homed_axes %}
          G28 X0 Y0
        {% endif %}
        G90
        G1 X399 Y399
        SET_PIN PIN=LED VALUE=1
        M18
        M117 Detecting object on the Bed with Camera
        RUN_SHELL_COMMAND CMD=DETECT_BED_OBJECT
        G4 P8000
        SET_PIN PIN=LED VALUE=0.5
        M117 .
    {% endif %}

#[save_variables]
#filename: /home/mks/printer_data/config/.variables.stb

# The "make flash" command does not work on the MKS SKIPR. Instead,
# after running "make", copy the generated "out/klipper.bin" file to a
# file named "mks_skipr.bin" on an SD card and then restart the
# MKS SKIPR with that SD card.




# See docs/Config_Reference.md for a description of parameters.
#[mcu]
# The hardware use USART1 PA10/PA9 connect to RK3328
#serial: /dev/serial/by-id/usb-Klipper_stm32f407xx_2C003B001250314335393520-if00
#serial: /dev/ttyS0
#restart_method: command
#canbus_uuid: e2ec05901641



[adc_temperature heatbed]
temperature1: 25 
resistance1: 100000 
temperature2: 50 
resistance2: 35696
temperature3: 125 
resistance3: 3234.2


[heater_bed]
heater_pin: PD12
sensor_type: Generic 3950
sensor_pin: PC0
max_power: 1.0
#control = pid
#pid_kp = 71.039
#pid_ki = 2.223
#pid_kd = 567.421
min_temp: -30
max_temp: 125


####################################################################
#	Homing and Gantry Adjustment Routines
#####################################################################




[quad_gantry_level]
gantry_corners:
	-58,-7
    308,318
##	Probe points
points:
	20,103
	20,383
	320,383
	320,103
speed: 200
horizontal_move_z: 10
retries: 9
retry_tolerance: 0.05
max_adjust: 15


[printer]
kinematics:corexy
max_velocity: 500
max_accel: 10000
max_accel_to_decel: 10000
max_z_velocity: 5
max_z_accel: 100
square_corner_velocity: 15


[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PB2,  EXP1_3=PE11, EXP1_5=PD9, EXP1_7=PE15, EXP1_9=<GND>,
    EXP1_2=PE10, EXP1_4=PD10, EXP1_6=PD8, EXP1_8=PE7,  EXP1_10=<5V>,
    # EXP2 header
    EXP2_1=PA6, EXP2_3=PE9, EXP2_5=PE8, EXP2_7=PD13,  EXP2_9=<GND>,
    EXP2_2=PA5, EXP2_4=PA4, EXP2_6=PA7, EXP2_8=<RST>, EXP2_10=<3.3v>
    # Pins EXP2_1, EXP2_6, EXP2_2 are also MISO, MOSI, SCK of bus "ssp1"

    # See the sample-lcd.cfg file for definitions of common LCD displays.


[exclude_object]


[resonance_tester]
accel_chip: adxl345
probe_points:
    180, 180, 50  # an example
max_freq: 200

[input_shaper]
#shaper_freq_x: 54.8
#shaper_type_x: mzv
#shaper_freq_y: 26.4
#shaper_type_y: mzv

[virtual_sdcard]
#path:/home/mks/uploads
path: ~/printer_data/gcodes

[pause_resume]


[display_status]

[gcode_macro PRINT_END]
gcode:
    # Turn off bed, extruder, and fan
    M140 S0
    M104 S0
    M106 S0
    SET_FAN_SPEED FAN=filter_fan SPEED=0
    # Move nozzle away from print while retracting
    G91
    G1 E-2.6 F300
    G1 X-1 Y-1 F600
    # Raise nozzle mm
    G1 Z2 F3000
    G90 
    G1 X399 Y399
    # Disable steppers
    M84
    SET_PIN PIN=Board_FAN VALUE=0.0
    M117 .


#[safe_z_home]
#home_xy_position: 200,200 # Change coordinates to the center of your print bed
#speed: 200
#z_hop: 4                 # Move up 10mm
#z_hop_speed: 5


[homing_override]
set_position_z:0
gcode: 

    {% if 'x' not in printer.toolhead.homed_axes and 'y' not in printer.toolhead.homed_axes  %}
       { action_respond_info("z rise") }
       G91
       G1 Z3
       G90
    {% endif %}
    
    {% if params.X is defined %}
    { action_respond_info("Homing X") }
    G28 X
    {% endif %}
     {% if params.Y is defined %}
     G28 Y
    { action_respond_info("Homing Y") }
    {% endif %}
     {% if params.Z is defined %}
     
     G1 X200 Y200 F6000
     RS_probe
     G28 Z
     G1 Z5
    { action_respond_info("Homing Z") }
    {% endif %}

    
    {% if params.X is undefined and params.Y is undefined and params.Z is undefined%}  
    { action_respond_info("Homing all") }
    {% if params.N is undefined %}
    { action_respond_info("Homing default") }
    G28 X Y 
    G1 X200 Y200 F6000
    RS_probe
    G28 Z
    G1 Z5
    {% else %}
    
    {% if 'xy' not in printer.toolhead.homed_axes  %}
       { action_respond_info("Homing XY first") }
    {% else %}
    RS_probe
    G28 Z
    G1 Z5
    {% endif %}
    
    {% endif %}
    
    {% endif %}
    
    

[z_tilt]
z_positions:
     50,50
    50,320
    320,320
    320,50
points:
    50,50
    50,320
    320,320
    320,50
horizontal_move_z: 6
speed:120
retries: 7
retry_tolerance: 0.1
